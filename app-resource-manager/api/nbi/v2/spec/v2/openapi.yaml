openapi: 3.0.3
info:
  title: App Resource Manager API
  description: App Resource Manager service providing operations for resource management
  version: 1.0.0
paths:
  /arm/v2/workloads/{app_id}/{cluster_id}:
    get:
      tags:
      - resource.v2.AppWorkloadService
      summary: ListAppWorkloads
      description: Gets a list of all workloads for an application of a deployment
        in a cluster.
      operationId: resource.v2.AppWorkloadService.ListAppWorkloads
      parameters:
      - name: app_id
        in: path
        description: Application ID
        required: true
        schema:
          type: string
          title: app_id
          description: Application ID
      - name: cluster_id
        in: path
        description: Cluster ID
        required: true
        schema:
          type: string
          title: cluster_id
          description: Cluster ID
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/resource.v2.ListAppWorkloadsResponse'
  /arm/v2/endpoints/{app_id}/{cluster_id}:
    get:
      tags:
      - resource.v2.EndpointsService
      summary: ListAppEndpoints
      description: Gets a list of all endpoints for an application of a deployment
        in a cluster.
      operationId: resource.v2.EndpointsService.ListAppEndpoints
      parameters:
      - name: app_id
        in: path
        description: Application ID
        required: true
        schema:
          type: string
          title: app_id
          description: Application ID
      - name: cluster_id
        in: path
        description: Cluster ID
        required: true
        schema:
          type: string
          title: cluster_id
          description: Cluster ID
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/resource.v2.ListAppEndpointsResponse'
  /arm/v2/workloads/pods/{cluster_id}/{namespace}/{pod_name}/delete:
    put:
      tags:
      - resource.v2.PodService
      summary: DeletePod
      description: Deletes the pod for an application in a cluster.
      operationId: resource.v2.PodService.DeletePod
      parameters:
      - name: cluster_id
        in: path
        description: Cluster ID
        required: true
        schema:
          type: string
          title: cluster_id
          description: Cluster ID
      - name: namespace
        in: path
        description: Namespace that the pod is running on.
        required: true
        schema:
          type: string
          title: namespace
          description: Namespace that the pod is running on.
      - name: pod_name
        in: path
        description: Name of the pod.
        required: true
        schema:
          type: string
          title: pod_name
          description: Name of the pod.
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/resource.v2.DeletePodResponse'
  /arm/v2/workloads/virtual-machines/{app_id}/{cluster_id}/{virtual_machine_id}/start:
    put:
      tags:
      - resource.v2.VirtualMachineService
      summary: StartVirtualMachine
      description: Starts a virtual machine for an application of a deployment in
        a cluster.
      operationId: resource.v2.VirtualMachineService.StartVirtualMachine
      parameters:
      - name: app_id
        in: path
        description: Application ID
        required: true
        schema:
          type: string
          title: app_id
          description: Application ID
      - name: cluster_id
        in: path
        description: Cluster ID
        required: true
        schema:
          type: string
          title: cluster_id
          description: Cluster ID
      - name: virtual_machine_id
        in: path
        description: Virtual machine ID
        required: true
        schema:
          type: string
          title: virtual_machine_id
          description: Virtual machine ID
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/resource.v2.StartVirtualMachineResponse'
  /arm/v2/workloads/virtual-machines/{app_id}/{cluster_id}/{virtual_machine_id}/stop:
    put:
      tags:
      - resource.v2.VirtualMachineService
      summary: StopVirtualMachine
      description: Stops a virtual machine for an application of a deployment in a
        cluster.
      operationId: resource.v2.VirtualMachineService.StopVirtualMachine
      parameters:
      - name: app_id
        in: path
        description: Application ID
        required: true
        schema:
          type: string
          title: app_id
          description: Application ID
      - name: cluster_id
        in: path
        description: Cluster ID
        required: true
        schema:
          type: string
          title: cluster_id
          description: Cluster ID
      - name: virtual_machine_id
        in: path
        description: Virtual machine ID
        required: true
        schema:
          type: string
          title: virtual_machine_id
          description: Virtual machine ID
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/resource.v2.StopVirtualMachineResponse'
  /arm/v2/workloads/virtual-machines/{app_id}/{cluster_id}/{virtual_machine_id}/restart:
    put:
      tags:
      - resource.v2.VirtualMachineService
      summary: RestartVirtualMachine
      description: Restarts a virtual machine for an application of a deployment in
        a cluster.
      operationId: resource.v2.VirtualMachineService.RestartVirtualMachine
      parameters:
      - name: app_id
        in: path
        description: Application ID
        required: true
        schema:
          type: string
          title: app_id
          description: Application ID
      - name: cluster_id
        in: path
        description: Cluster ID
        required: true
        schema:
          type: string
          title: cluster_id
          description: Cluster ID
      - name: virtual_machine_id
        in: path
        description: Virtual machine ID
        required: true
        schema:
          type: string
          title: virtual_machine_id
          description: Virtual machine ID
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/resource.v2.RestartVirtualMachineResponse'
  /arm/v2/workloads/virtual-machines/{app_id}/{cluster_id}/{virtual_machine_id}/vnc:
    get:
      tags:
      - resource.v2.VirtualMachineService
      summary: GetVNC
      description: Accesses the VNC console to access a virtual machine.
      operationId: resource.v2.VirtualMachineService.GetVNC
      parameters:
      - name: app_id
        in: path
        description: Application ID
        required: true
        schema:
          type: string
          title: app_id
          description: Application ID
      - name: cluster_id
        in: path
        description: Cluster ID
        required: true
        schema:
          type: string
          title: cluster_id
          description: Cluster ID
      - name: virtual_machine_id
        in: path
        description: Virtual machine ID
        required: true
        schema:
          type: string
          title: virtual_machine_id
          description: Virtual machine ID
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/resource.v2.GetVNCResponse'
components:
  schemas:
    resource.v2.PodStatus.State:
      type: string
      title: State
      enum:
      - STATE_UNSPECIFIED
      - STATE_PENDING
      - STATE_RUNNING
      - STATE_SUCCEEDED
      - STATE_FAILED
    resource.v2.Container:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Container name
        imageName:
          type: string
          title: image_name
          description: image_name container image name
          readOnly: true
        restartCount:
          type: integer
          title: restart_count
          format: int32
          description: Number of times that a container is restarted.
          readOnly: true
        status:
          title: status
          description: status status of a container
          readOnly: true
          $ref: '#/components/schemas/resource.v2.ContainerStatus'
      title: Container
      required:
      - name
      additionalProperties: false
      description: Represents a container resource.
    resource.v2.ContainerStateRunning:
      type: object
      title: ContainerStateRunning
      additionalProperties: false
      description: Running status of a container.
    resource.v2.ContainerStateTerminated:
      type: object
      properties:
        reason:
          type: string
          title: reason
          description: Reason of the termination.
          readOnly: true
        message:
          type: string
          title: message
          description: Message of the termination status.
          readOnly: true
        exitCode:
          type: integer
          title: exit_code
          format: int32
          description: Exit code of the termination status.
          readOnly: true
      title: ContainerStateTerminated
      additionalProperties: false
      description: Termination status of a container.
    resource.v2.ContainerStateWaiting:
      type: object
      properties:
        reason:
          type: string
          title: reason
          description: Reason of the waiting status.
          readOnly: true
        message:
          type: string
          title: message
          description: Message of the waiting status.
          readOnly: true
      title: ContainerStateWaiting
      additionalProperties: false
      description: Waiting status of a container including the reason and message.
    resource.v2.ContainerStatus:
      type: object
      oneOf:
      - properties:
          containerStateRunning:
            title: container_state_running
            $ref: '#/components/schemas/resource.v2.ContainerStateRunning'
        title: container_state_running
        required:
        - containerStateRunning
      - properties:
          containerStateTerminated:
            title: container_state_terminated
            $ref: '#/components/schemas/resource.v2.ContainerStateTerminated'
        title: container_state_terminated
        required:
        - containerStateTerminated
      - properties:
          containerStateWaiting:
            title: container_state_waiting
            $ref: '#/components/schemas/resource.v2.ContainerStateWaiting'
        title: container_state_waiting
        required:
        - containerStateWaiting
      title: ContainerStatus
      additionalProperties: false
      description: ContainerStatus status of a container
    resource.v2.Pod:
      type: object
      properties:
        containers:
          type: array
          items:
            $ref: '#/components/schemas/resource.v2.Container'
          title: containers
          description: containers list of containers per pod
        status:
          title: status
          description: status pod status
          readOnly: true
          $ref: '#/components/schemas/resource.v2.PodStatus'
      title: Pod
      additionalProperties: false
      description: Represents a pod resource.
    resource.v2.PodStatus:
      type: object
      properties:
        state:
          title: state
          description: State information
          $ref: '#/components/schemas/resource.v2.PodStatus.State'
      title: PodStatus
      additionalProperties: false
      description: The status of the pod during its lifecycle.
    resource.v2.AdminStatus.State:
      type: string
      title: State
      enum:
      - STATE_UNSPECIFIED
      - STATE_UP
      - STATE_DOWN
    resource.v2.AppWorkload.Type:
      type: string
      title: Type
      enum:
      - TYPE_UNSPECIFIED
      - TYPE_VIRTUAL_MACHINE
      - TYPE_POD
    resource.v2.VirtualMachineStatus.State:
      type: string
      title: State
      enum:
      - STATE_UNSPECIFIED
      - STATE_STOPPED
      - STATE_PROVISIONING
      - STATE_STARTING
      - STATE_RUNNING
      - STATE_PAUSED
      - STATE_STOPPING
      - STATE_TERMINATING
      - STATE_CRASH_LOOP_BACKOFF
      - STATE_MIGRATING
      - STATE_ERROR_UNSCHEDULABLE
      - STATE_ERROR_IMAGE_PULL
      - STATE_ERROR_IMAGE_PULL_BACKOFF
      - STATE_ERROR_PVC_NOT_FOUND
      - STATE_ERROR_DATA_VOLUME
      - STATE_WAITING_FOR_VOLUME_BINDING
    google.protobuf.Timestamp:
      type: string
      example: '2023-01-15T01:30:15.01Z'
      format: date-time
      description: "A Timestamp represents a point in time independent of any time\
        \ zone or local\n calendar, encoded as a count of seconds and fractions of\
        \ seconds at\n nanosecond resolution. The count is relative to an epoch at\
        \ UTC midnight on\n January 1, 1970, in the proleptic Gregorian calendar which\
        \ extends the\n Gregorian calendar backwards to year one.\n\n All minutes\
        \ are 60 seconds long. Leap seconds are \"smeared\" so that no leap\n second\
        \ table is needed for interpretation, using a [24-hour linear\n smear](https://developers.google.com/time/smear).\n\
        \n The range is from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59.999999999Z.\
        \ By\n restricting to that range, we ensure that we can convert to and from\
        \ [RFC\n 3339](https://www.ietf.org/rfc/rfc3339.txt) date strings.\n\n # Examples\n\
        \n Example 1: Compute Timestamp from POSIX `time()`.\n\n     Timestamp timestamp;\n\
        \     timestamp.set_seconds(time(NULL));\n     timestamp.set_nanos(0);\n\n\
        \ Example 2: Compute Timestamp from POSIX `gettimeofday()`.\n\n     struct\
        \ timeval tv;\n     gettimeofday(&tv, NULL);\n\n     Timestamp timestamp;\n\
        \     timestamp.set_seconds(tv.tv_sec);\n     timestamp.set_nanos(tv.tv_usec\
        \ * 1000);\n\n Example 3: Compute Timestamp from Win32 `GetSystemTimeAsFileTime()`.\n\
        \n     FILETIME ft;\n     GetSystemTimeAsFileTime(&ft);\n     UINT64 ticks\
        \ = (((UINT64)ft.dwHighDateTime) << 32) | ft.dwLowDateTime;\n\n     // A Windows\
        \ tick is 100 nanoseconds. Windows epoch 1601-01-01T00:00:00Z\n     // is\
        \ 11644473600 seconds before Unix epoch 1970-01-01T00:00:00Z.\n     Timestamp\
        \ timestamp;\n     timestamp.set_seconds((INT64) ((ticks / 10000000) - 11644473600LL));\n\
        \     timestamp.set_nanos((INT32) ((ticks % 10000000) * 100));\n\n Example\
        \ 4: Compute Timestamp from Java `System.currentTimeMillis()`.\n\n     long\
        \ millis = System.currentTimeMillis();\n\n     Timestamp timestamp = Timestamp.newBuilder().setSeconds(millis\
        \ / 1000)\n         .setNanos((int) ((millis % 1000) * 1000000)).build();\n\
        \n Example 5: Compute Timestamp from Java `Instant.now()`.\n\n     Instant\
        \ now = Instant.now();\n\n     Timestamp timestamp =\n         Timestamp.newBuilder().setSeconds(now.getEpochSecond())\n\
        \             .setNanos(now.getNano()).build();\n\n Example 6: Compute Timestamp\
        \ from current time in Python.\n\n     timestamp = Timestamp()\n     timestamp.GetCurrentTime()\n\
        \n # JSON Mapping\n\n In JSON format, the Timestamp type is encoded as a string\
        \ in the\n [RFC 3339](https://www.ietf.org/rfc/rfc3339.txt) format. That is,\
        \ the\n format is \"{year}-{month}-{day}T{hour}:{min}:{sec}[.{frac_sec}]Z\"\
        \n where {year} is always expressed using four digits while {month}, {day},\n\
        \ {hour}, {min}, and {sec} are zero-padded to two digits each. The fractional\n\
        \ seconds, which can go up to 9 digits (i.e. up to 1 nanosecond resolution),\n\
        \ are optional. The \"Z\" suffix indicates the timezone (\"UTC\"); the timezone\n\
        \ is required. A proto3 JSON serializer should always use UTC (as indicated\
        \ by\n \"Z\") when printing the Timestamp type and a proto3 JSON parser should\
        \ be\n able to accept both UTC and other timezones (as indicated by an offset).\n\
        \n For example, \"2017-01-15T01:30:15.01Z\" encodes 15.01 seconds past\n 01:30\
        \ UTC on January 15, 2017.\n\n In JavaScript, one can convert a Date object\
        \ to this format using the\n standard\n [toISOString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)\n\
        \ method. In Python, a standard `datetime.datetime` object can be converted\n\
        \ to this format using\n [`strftime`](https://docs.python.org/2/library/time.html#time.strftime)\
        \ with\n the time format spec '%Y-%m-%dT%H:%M:%S.%fZ'. Likewise, in Java,\
        \ one can use\n the Joda Time's [`ISODateTimeFormat.dateTime()`](\n http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateTime()\n\
        \ ) to obtain a formatter capable of generating timestamps in this format."
    resource.v2.AdminStatus:
      type: object
      properties:
        state:
          title: state
          description: State information
          $ref: '#/components/schemas/resource.v2.AdminStatus.State'
      title: AdminStatus
      additionalProperties: false
      description: Represents the associated VirtualMachineInstance's state, either
        created (up state) or not (down state).
    resource.v2.AppWorkload:
      type: object
      allOf:
      - properties:
          type:
            title: type
            description: Application workload type, e.g. virtual machine and pod.
            $ref: '#/components/schemas/resource.v2.AppWorkload.Type'
          id:
            type: string
            title: id
            description: Workload UUID
          name:
            type: string
            title: name
            description: Workload name
          namespace:
            type: string
            title: namespace
            description: Namespace where the workload is created.
            readOnly: true
          createTime:
            title: create_time
            description: The time when the workload is created.
            readOnly: true
            $ref: '#/components/schemas/google.protobuf.Timestamp'
          workloadReady:
            type: boolean
            title: workload_ready
            description: Ready status to determines if a workload is fully functional
              or not.
            readOnly: true
      - oneOf:
        - properties:
            pod:
              title: pod
              $ref: '#/components/schemas/resource.v2.Pod'
          title: pod
          required:
          - pod
        - properties:
            virtualMachine:
              title: virtual_machine
              $ref: '#/components/schemas/resource.v2.VirtualMachine'
          title: virtual_machine
          required:
          - virtualMachine
      title: AppWorkload
      required:
      - id
      - name
      additionalProperties: false
      description: "AppWorkload a high-level abstraction for representing different\
        \ types of application workloads.\n The application workloads can be virtual\
        \ machine-based or container-based."
    resource.v2.VirtualMachine:
      type: object
      properties:
        status:
          title: status
          description: The virtual machine current status
          readOnly: true
          $ref: '#/components/schemas/resource.v2.VirtualMachineStatus'
        adminStatus:
          title: admin_status
          description: The admin status whether the associated VirtualMachineInstance
            is created or not
          readOnly: true
          $ref: '#/components/schemas/resource.v2.AdminStatus'
      title: VirtualMachine
      additionalProperties: false
      description: Represents a virtual machine.
    resource.v2.VirtualMachineStatus:
      type: object
      properties:
        state:
          title: state
          description: Virtual machine state
          $ref: '#/components/schemas/resource.v2.VirtualMachineStatus.State'
      title: VirtualMachineStatus
      additionalProperties: false
      description: Status of a virtual machine.
    resource.v2.ListAppWorkloadsRequest:
      type: object
      properties:
        appId:
          type: string
          title: app_id
          description: Application ID
        clusterId:
          type: string
          title: cluster_id
          description: Cluster ID
      title: ListAppWorkloadsRequest
      required:
      - appId
      - clusterId
      additionalProperties: false
      description: Request message for ListAppWorkloadsRequest method
    resource.v2.ListAppWorkloadsResponse:
      type: object
      properties:
        appWorkloads:
          type: array
          items:
            $ref: '#/components/schemas/resource.v2.AppWorkload'
          title: app_workloads
          description: A list of virtual machines.
      title: ListAppWorkloadsResponse
      additionalProperties: false
      description: Response message for the ListAppWorkloadsResponse method.
    resource.v2.EndpointStatus.State:
      type: string
      title: State
      enum:
      - STATE_UNSPECIFIED
      - STATE_READY
      - STATE_NOT_READY
    resource.v2.AppEndpoint:
      type: object
      properties:
        id:
          type: string
          title: id
          description: Endpoint object UID (e.g. service or ingress UID)
          readOnly: true
        name:
          type: string
          title: name
          description: Endpoint name
          readOnly: true
        fqdns:
          type: array
          items:
            $ref: '#/components/schemas/resource.v2.Fqdn'
          title: fqdns
          description: Fully qualified domain name (FQDN) for external access.
          readOnly: true
        ports:
          type: array
          items:
            $ref: '#/components/schemas/resource.v2.Port'
          title: ports
          description: List of ports exposed by a service for external access
          readOnly: true
        endpointStatus:
          title: endpoint_status
          description: EndpointStatus status of an endpoint
          readOnly: true
          $ref: '#/components/schemas/resource.v2.EndpointStatus'
      title: AppEndpoint
      additionalProperties: false
      description: Represents an endpoint for accessing the application outside of
        a cluster.
    resource.v2.EndpointStatus:
      type: object
      properties:
        state:
          title: state
          description: Endpoint state, either Ready or NotReady.
          readOnly: true
          $ref: '#/components/schemas/resource.v2.EndpointStatus.State'
      title: EndpointStatus
      additionalProperties: false
      description: Status of the endpoint.
    resource.v2.Fqdn:
      type: object
      properties:
        fqdn:
          type: string
          title: fqdn
      title: Fqdn
      additionalProperties: false
      description: Fully qualified domain name.
    resource.v2.ListAppEndpointsRequest:
      type: object
      properties:
        appId:
          type: string
          title: app_id
          description: Application ID
        clusterId:
          type: string
          title: cluster_id
          description: Cluster ID
      title: ListAppEndpointsRequest
      required:
      - appId
      - clusterId
      additionalProperties: false
      description: Request message for ListAppEndpoints method
    resource.v2.ListAppEndpointsResponse:
      type: object
      properties:
        appEndpoints:
          type: array
          items:
            $ref: '#/components/schemas/resource.v2.AppEndpoint'
          title: app_endpoints
          description: List of services.
          readOnly: true
      title: ListAppEndpointsResponse
      additionalProperties: false
      description: Response message for the ListAppEndpoints method.
    resource.v2.Port:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Port name
          readOnly: true
        value:
          type: integer
          title: value
          format: int32
          description: Port value
          readOnly: true
        protocol:
          type: string
          title: protocol
          description: Protocol for a port.
          readOnly: true
        serviceProxyUrl:
          type: string
          title: service_proxy_url
          description: Service proxy URL for a port.
          readOnly: true
      title: Port
      additionalProperties: false
      description: Port information
    resource.v2.DeletePodRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          description: Cluster ID
        namespace:
          type: string
          title: namespace
          description: Namespace that the pod is running on.
        podName:
          type: string
          title: pod_name
          description: Name of the pod.
      title: DeletePodRequest
      required:
      - clusterId
      - namespace
      - podName
      additionalProperties: false
      description: Request message for DeletePod method
    resource.v2.DeletePodResponse:
      type: object
      title: DeletePodResponse
      additionalProperties: false
      description: Response message for the DeletePod method.
    resource.v2.GetVNCRequest:
      type: object
      properties:
        appId:
          type: string
          title: app_id
          description: Application ID
        clusterId:
          type: string
          title: cluster_id
          description: Cluster ID
        virtualMachineId:
          type: string
          title: virtual_machine_id
          description: Virtual machine ID
      title: GetVNCRequest
      required:
      - appId
      - clusterId
      - virtualMachineId
      additionalProperties: false
      description: Request message for GetVNC method
    resource.v2.GetVNCResponse:
      type: object
      properties:
        address:
          type: string
          title: address
      title: GetVNCResponse
      required:
      - address
      additionalProperties: false
      description: Response message for the GetVNC method.
    resource.v2.RestartVirtualMachineRequest:
      type: object
      properties:
        appId:
          type: string
          title: app_id
          description: Application ID
        clusterId:
          type: string
          title: cluster_id
          description: Cluster ID
        virtualMachineId:
          type: string
          title: virtual_machine_id
          description: Virtual machine ID
      title: RestartVirtualMachineRequest
      required:
      - appId
      - clusterId
      - virtualMachineId
      additionalProperties: false
      description: Request message for RestartVirtualMachine method
    resource.v2.RestartVirtualMachineResponse:
      type: object
      title: RestartVirtualMachineResponse
      additionalProperties: false
      description: Response message for the RestartVirtualMachine method.
    resource.v2.StartVirtualMachineRequest:
      type: object
      properties:
        appId:
          type: string
          title: app_id
          description: Application ID
        clusterId:
          type: string
          title: cluster_id
          description: Cluster ID
        virtualMachineId:
          type: string
          title: virtual_machine_id
          description: Virtual machine ID
      title: StartVirtualMachineRequest
      required:
      - appId
      - clusterId
      - virtualMachineId
      additionalProperties: false
      description: Request message for StartVirtualMachine method
    resource.v2.StartVirtualMachineResponse:
      type: object
      title: StartVirtualMachineResponse
      additionalProperties: false
      description: Response message for the StartVirtualMachine method.
    resource.v2.StopVirtualMachineRequest:
      type: object
      properties:
        appId:
          type: string
          title: app_id
          description: Application ID
        clusterId:
          type: string
          title: cluster_id
          description: Cluster ID
        virtualMachineId:
          type: string
          title: virtual_machine_id
          description: Virtual machine ID
      title: StopVirtualMachineRequest
      required:
      - appId
      - clusterId
      - virtualMachineId
      additionalProperties: false
      description: Request message for StopVirtualMachine method
    resource.v2.StopVirtualMachineResponse:
      type: object
      title: StopVirtualMachineResponse
      additionalProperties: false
      description: Response message for the StopVirtualMachine method.
