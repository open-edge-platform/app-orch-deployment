openapi: 3.1.0
info:
  title: deployment.v1
paths: {}
components:
  schemas:
    deployment.v1.State:
      type: string
      title: State
      enum:
        - UNKNOWN
        - RUNNING
        - DOWN
        - INTERNAL_ERROR
        - DEPLOYING
        - UPDATING
        - TERMINATING
        - ERROR
        - NO_TARGET_CLUSTERS
      description: State are the different states a deployment/cluster/app can be in.
    google.protobuf.NullValue:
      type: string
      title: NullValue
      enum:
        - NULL_VALUE
      description: |-
        `NullValue` is a singleton enumeration to represent the null value for the
         `Value` type union.

          The JSON representation for `NullValue` is JSON `null`.
    deployment.v1.App:
      type: object
      properties:
        name:
          type: string
          title: name
          description: The deployment package app name.
          readOnly: true
        id:
          type: string
          title: id
          description: |-
            Id of the app (same as Fleet bundle name) which is,
             concatenated from name and deploy_id (uid which comes from k8s).
          readOnly: true
        status:
          title: status
          description: Status has details of the app.
          readOnly: true
          $ref: '#/components/schemas/deployment.v1.Deployment.Status'
      title: App
      additionalProperties: false
      description: Details of application.
    deployment.v1.Cluster:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Name is the display name which user provides and ECM creates and assigns clustername label to Fleet cluster object.
          readOnly: true
        id:
          type: string
          title: id
          description: ID is the cluster id which ECM generates and assigns to the Rancher cluster name.
          readOnly: true
        status:
          title: status
          description: Status has details of the cluster.
          readOnly: true
          $ref: '#/components/schemas/deployment.v1.Deployment.Status'
        apps:
          type: array
          items:
            $ref: '#/components/schemas/deployment.v1.App'
          title: apps
          description: Apps has per-app details.
          readOnly: true
      title: Cluster
      additionalProperties: false
      description: Details of cluster.
    deployment.v1.Deployment:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Deployment name (unique string assigned by Orchestrator).
          readOnly: true
        displayName:
          type: string
          title: display_name
          maxLength: 40
          pattern: ^([a-zA-Z0-9][\w\- \.\/_]{0,38}[a-zA-Z0-9]{0,1}|)$
          description: |
            (OPTIONAL) Deployment display name.
            string.max_len = 40
            string.min_len = 0
            string.pattern = "^([a-zA-Z0-9][\\w\\- \\.\\/_]{0,38}[a-zA-Z0-9]{0,1}|)$"
        appName:
          type: string
          title: app_name
          maxLength: 40
          minLength: 1
          pattern: ^[a-z0-9][a-z0-9-]{0,38}[a-z0-9]{0,1}$
          description: |
            The deployment package name to deploy from the catalog.
            string.max_len = 40
            string.min_len = 1
            string.pattern = "^[a-z0-9][a-z0-9-]{0,38}[a-z0-9]{0,1}$"
        appVersion:
          type: string
          title: app_version
          maxLength: 20
          minLength: 1
          pattern: ^[a-z0-9][a-z0-9-.]{0,18}[a-z0-9]{0,1}$
          description: |
            The version of the deployment package.
            string.max_len = 20
            string.min_len = 1
            string.pattern = "^[a-z0-9][a-z0-9-.]{0,18}[a-z0-9]{0,1}$"
        profileName:
          type: string
          title: profile_name
          maxLength: 40
          pattern: ^[a-z0-9]*[a-z0-9-]{0,38}[a-z0-9]{0,1}$
          description: |
            (OPTIONAL) The selected profile name to be used for the base Helm values of the different applications in the deployment package
            string.max_len = 40
            string.min_len = 0
            string.pattern = "^[a-z0-9]*[a-z0-9-]{0,38}[a-z0-9]{0,1}$"
        createTime:
          title: create_time
          description: The creation time of the deployment.
          readOnly: true
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        deployId:
          type: string
          title: deploy_id
          description: The id of the deployment.
          readOnly: true
        overrideValues:
          type: array
          items:
            $ref: '#/components/schemas/deployment.v1.OverrideValues'
          title: override_values
          description: (OPTIONAL) The Override values can be used to override any of the base profile values based on Deployment scenario.
        targetClusters:
          type: array
          items:
            $ref: '#/components/schemas/deployment.v1.TargetClusters'
          title: target_clusters
          description: (OPTIONAL) Cluster labels on which we want to deploy the application.
        status:
          title: status
          description: Status of the deployment.
          readOnly: true
          $ref: '#/components/schemas/deployment.v1.Deployment.Status'
        apps:
          type: array
          items:
            $ref: '#/components/schemas/deployment.v1.App'
          title: apps
          description: Application details.
          readOnly: true
        deploymentType:
          type: string
          title: deployment_type
          maxLength: 20
          pattern: ^[a-z0-9]*[a-z0-9-]{0,18}[a-z0-9]{0,1}$
          description: |
            (OPTIONAL) The deployment type for the target cluster deployment can be either auto-scaling or targeted.
             In Auto-scaling type, the application will be automatically deployed on all the
             clusters which match the Target cluster label. In Targeted type, the user has to select among pre created
             clusters to deploy the application.
            string.max_len = 20
            string.min_len = 0
            string.pattern = "^[a-z0-9]*[a-z0-9-]{0,18}[a-z0-9]{0,1}$"
        networkName:
          type: string
          title: network_name
          maxLength: 40
          pattern: ^[a-z0-9]*[a-z0-9-]{0,18}[a-z0-9]{0,1}$
          description: |
            (OPTIONAL) network_name is the name of the interconnect network that deployment be part of
            string.max_len = 40
            string.min_len = 0
            string.pattern = "^[a-z0-9]*[a-z0-9-]{0,18}[a-z0-9]{0,1}$"
        serviceExports:
          type: array
          items:
            $ref: '#/components/schemas/deployment.v1.ServiceExport'
          title: service_exports
          description: '(OPTIONAL) '
        allAppTargetClusters:
          title: all_app_target_clusters
          description: |-
            (OPTIONAL) Cluster labels/clusterID on which we want to deploy all the applications of the
             deployment package
          $ref: '#/components/schemas/deployment.v1.TargetClusters'
      title: Deployment
      required:
        - appName
        - appVersion
      additionalProperties: false
      description: Deployment defines the specification to deploy a Deployment Package onto a set of clusters.
    deployment.v1.Deployment.Status:
      type: object
      properties:
        state:
          title: state
          readOnly: true
          $ref: '#/components/schemas/deployment.v1.State'
        message:
          type: string
          title: message
          readOnly: true
        summary:
          title: summary
          readOnly: true
          $ref: '#/components/schemas/deployment.v1.Summary'
      title: Status
      additionalProperties: false
      description: Status has details of the deployment.
    deployment.v1.DeploymentInstancesCluster:
      type: object
      properties:
        deploymentUid:
          type: string
          title: deployment_uid
          description: Deployment CR UID.
          readOnly: true
        deploymentName:
          type: string
          title: deployment_name
          description: Deployment name (unique string assigned by Orchestrator).
          readOnly: true
        deploymentDisplayName:
          type: string
          title: deployment_display_name
          maxLength: 40
          pattern: ^([a-zA-Z0-9][\w\- \.\/_]{0,38}[a-zA-Z0-9]{0,1}|)$
          description: |
            (OPTIONAL) Deployment display name.
            string.max_len = 40
            string.min_len = 0
            string.pattern = "^([a-zA-Z0-9][\\w\\- \\.\\/_]{0,38}[a-zA-Z0-9]{0,1}|)$"
        status:
          title: status
          description: Status has details of the cluster.
          readOnly: true
          $ref: '#/components/schemas/deployment.v1.Deployment.Status'
        apps:
          type: array
          items:
            $ref: '#/components/schemas/deployment.v1.App'
          title: apps
          description: Apps has per-app details.
          readOnly: true
      title: DeploymentInstancesCluster
      additionalProperties: false
    deployment.v1.OverrideValues:
      type: object
      properties:
        appName:
          type: string
          title: app_name
          maxLength: 40
          minLength: 1
          pattern: ^[a-z0-9][a-z0-9-]{0,38}[a-z0-9]{0,1}$
          description: |
            deployment package name to use when overriding values.
            string.max_len = 40
            string.min_len = 1
            string.pattern = "^[a-z0-9][a-z0-9-]{0,38}[a-z0-9]{0,1}$"
        targetNamespace:
          type: string
          title: target_namespace
          maxLength: 63
          pattern: (^$)|^[a-z0-9]([-a-z0-9]{0,61}[a-z0-9])?$
          description: |
            (OPTIONAL) The namespace to deploy the app onto, default namespace is default.
            string.max_len = 63
            string.min_len = 0
            string.pattern = "(^$)|^[a-z0-9]([-a-z0-9]{0,61}[a-z0-9])?$"
        values:
          title: values
          description: (OPTIONAL) The YAML representing Helm overrides
          $ref: '#/components/schemas/google.protobuf.Struct'
      title: OverrideValues
      required:
        - appName
      additionalProperties: false
      description: |-
        The Override values can be used to override any of the base helm values of
         applications based on Deployment scenario.
    deployment.v1.ServiceExport:
      type: object
      properties:
        appName:
          type: string
          title: app_name
          maxLength: 40
          minLength: 1
          pattern: ^[a-z0-9][a-z0-9-]{0,38}[a-z0-9]{0,1}$
          description: |
            string.max_len = 40
            string.min_len = 1
            string.pattern = "^[a-z0-9][a-z0-9-]{0,38}[a-z0-9]{0,1}$"
        enabled:
          type: boolean
          title: enabled
      title: ServiceExport
      required:
        - appName
      additionalProperties: false
    deployment.v1.Summary:
      type: object
      properties:
        total:
          type: integer
          title: total
          format: int32
          description: Total count of apps/clusters in the deployment, value from owned GitRepo objects.
          readOnly: true
        running:
          type: integer
          title: running
          format: int32
          description: Number of running apps/clusters in the deployment, value from owned GitRepo objects.
          readOnly: true
        down:
          type: integer
          title: down
          format: int32
          description: Number of down apps/clusters in the deployment.
          readOnly: true
        type:
          type: string
          title: type
          description: Type of thing that we're counting, ie clusters, apps.
          readOnly: true
        unknown:
          type: integer
          title: unknown
          format: int32
          description: Unknown status to indicate cluster not reachable.
          readOnly: true
      title: Summary
      additionalProperties: false
      description: Count of status.
    deployment.v1.TargetClusters:
      type: object
      properties:
        appName:
          type: string
          title: app_name
          maxLength: 40
          pattern: (^$)|^[a-z0-9][a-z0-9-]{0,38}[a-z0-9]{0,1}$
          description: |
            (OPTIONAL) The targeted deployment package name.
            string.max_len = 40
            string.min_len = 0
            string.pattern = "(^$)|^[a-z0-9][a-z0-9-]{0,38}[a-z0-9]{0,1}$"
        labels:
          type: object
          title: labels
          additionalProperties:
            type: string
            title: value
            maxLength: 40
            minLength: 1
            pattern: (^$)|^[a-z0-9]([-_.=,a-z0-9/]{0,38}[a-z0-9])?$
            description: |
              string.max_len = 40
              string.min_len = 1
              string.pattern = "(^$)|^[a-z0-9]([-_.=,a-z0-9/]{0,38}[a-z0-9])?$"
          description: (OPTIONAL) Cluster labels to match the target cluster when auto-scaling deployment.
        clusterId:
          type: string
          title: cluster_id
          description: (OPTIONAL) Cluster id to match the target cluster when targeted deployment.
      title: TargetClusters
      additionalProperties: false
      description: Set target clusters based on labels.
    deployment.v1.TargetClusters.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    google.protobuf.ListValue:
      type: object
      properties:
        values:
          type: array
          items:
            $ref: '#/components/schemas/google.protobuf.Value'
          title: values
          description: Repeated field of dynamically typed values.
      title: ListValue
      additionalProperties: false
      description: |-
        `ListValue` is a wrapper around a repeated field of values.

         The JSON representation for `ListValue` is JSON array.
    google.protobuf.Struct:
      type: object
      additionalProperties:
        $ref: '#/components/schemas/google.protobuf.Value'
      description: |-
        `Struct` represents a structured data value, consisting of fields
         which map to dynamically typed values. In some languages, `Struct`
         might be supported by a native representation. For example, in
         scripting languages like JS a struct is represented as an
         object. The details of that representation are described together
         with the proto support for the language.

         The JSON representation for `Struct` is JSON object.
    google.protobuf.Struct.FieldsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          title: value
          $ref: '#/components/schemas/google.protobuf.Value'
      title: FieldsEntry
      additionalProperties: false
    google.protobuf.Timestamp:
      type: string
      examples:
        - "2023-01-15T01:30:15.01Z"
        - "2024-12-25T12:00:00Z"
      format: date-time
      description: |-
        A Timestamp represents a point in time independent of any time zone or local
         calendar, encoded as a count of seconds and fractions of seconds at
         nanosecond resolution. The count is relative to an epoch at UTC midnight on
         January 1, 1970, in the proleptic Gregorian calendar which extends the
         Gregorian calendar backwards to year one.

         All minutes are 60 seconds long. Leap seconds are "smeared" so that no leap
         second table is needed for interpretation, using a [24-hour linear
         smear](https://developers.google.com/time/smear).

         The range is from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59.999999999Z. By
         restricting to that range, we ensure that we can convert to and from [RFC
         3339](https://www.ietf.org/rfc/rfc3339.txt) date strings.

         # Examples

         Example 1: Compute Timestamp from POSIX `time()`.

             Timestamp timestamp;
             timestamp.set_seconds(time(NULL));
             timestamp.set_nanos(0);

         Example 2: Compute Timestamp from POSIX `gettimeofday()`.

             struct timeval tv;
             gettimeofday(&tv, NULL);

             Timestamp timestamp;
             timestamp.set_seconds(tv.tv_sec);
             timestamp.set_nanos(tv.tv_usec * 1000);

         Example 3: Compute Timestamp from Win32 `GetSystemTimeAsFileTime()`.

             FILETIME ft;
             GetSystemTimeAsFileTime(&ft);
             UINT64 ticks = (((UINT64)ft.dwHighDateTime) << 32) | ft.dwLowDateTime;

             // A Windows tick is 100 nanoseconds. Windows epoch 1601-01-01T00:00:00Z
             // is 11644473600 seconds before Unix epoch 1970-01-01T00:00:00Z.
             Timestamp timestamp;
             timestamp.set_seconds((INT64) ((ticks / 10000000) - 11644473600LL));
             timestamp.set_nanos((INT32) ((ticks % 10000000) * 100));

         Example 4: Compute Timestamp from Java `System.currentTimeMillis()`.

             long millis = System.currentTimeMillis();

             Timestamp timestamp = Timestamp.newBuilder().setSeconds(millis / 1000)
                 .setNanos((int) ((millis % 1000) * 1000000)).build();


         Example 5: Compute Timestamp from current time in Python.

             timestamp = Timestamp()
             timestamp.GetCurrentTime()

         # JSON Mapping

         In JSON format, the Timestamp type is encoded as a string in the
         [RFC 3339](https://www.ietf.org/rfc/rfc3339.txt) format. That is, the
         format is "{year}-{month}-{day}T{hour}:{min}:{sec}[.{frac_sec}]Z"
         where {year} is always expressed using four digits while {month}, {day},
         {hour}, {min}, and {sec} are zero-padded to two digits each. The fractional
         seconds, which can go up to 9 digits (i.e. up to 1 nanosecond resolution),
         are optional. The "Z" suffix indicates the timezone ("UTC"); the timezone
         is required. A proto3 JSON serializer should always use UTC (as indicated by
         "Z") when printing the Timestamp type and a proto3 JSON parser should be
         able to accept both UTC and other timezones (as indicated by an offset).

         For example, "2017-01-15T01:30:15.01Z" encodes 15.01 seconds past
         01:30 UTC on January 15, 2017.

         In JavaScript, one can convert a Date object to this format using the
         standard
         [toISOString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)
         method. In Python, a standard `datetime.datetime` object can be converted
         to this format using
         [`strftime`](https://docs.python.org/2/library/time.html#time.strftime) with
         the time format spec '%Y-%m-%dT%H:%M:%S.%fZ'. Likewise, in Java, one can use
         the Joda Time's [`ISODateTimeFormat.dateTime()`](
         http://www.joda.org/joda-time/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateTime%2D%2D
         ) to obtain a formatter capable of generating timestamps in this format.
    google.protobuf.Value:
      oneOf:
        - type: "null"
        - type: number
        - type: string
        - type: boolean
        - type: array
        - type: object
          additionalProperties: true
      description: |-
        `Value` represents a dynamically typed value which can be either
         null, a number, a string, a boolean, a recursive struct value, or a
         list of values. A producer of value is expected to set one of that
         variants, absence of any variant indicates an error.

         The JSON representation for `Value` is JSON value.
security: []
