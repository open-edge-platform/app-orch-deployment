# SPDX-FileCopyrightText: (C) 2025 Intel Corporation
#
# SPDX-License-Identifier: Apache-2.0

version: v1
plugins:
  # Generate Go protobuf types
  - name: go
    out: api/nbi/v2
    opt: paths=source_relative
  
  # Generate gRPC services (required for gRPC-Gateway)
  - name: go-grpc
    out: api/nbi/v2
    opt: paths=source_relative
  
  # Generate gRPC-Gateway for REST endpoints
  - name: grpc-gateway
    out: api/nbi/v2
    opt:
      - paths=source_relative
      - generate_unbound_methods=true
  
  # Generate buf.validate validation code
  - name: validate
    out: api/nbi/v2
    opt:
      - paths=source_relative
      - lang=go
  
  # Generate OpenAPI specs with new plugin (replacing kollalabs)
  - name: connect-openapi
    out: api/nbi/v2/spec
    strategy: all
