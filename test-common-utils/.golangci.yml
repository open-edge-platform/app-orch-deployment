# SPDX-FileCopyrightText: (C) 2023 Intel Corporation
#
# SPDX-License-Identifier: Apache-2.0

version: "2"

run:
  # Autogenerated files take too much time and memory to load,
  # even if we skip them with -skip-dirs or -skip-dirs;
  # or mark them as generated; or use nolint annotations.
  # So we define this tag and use it in the autogenerated files.
  build-tags:
    - codeanalysis
  # Do not run linters on unit-test files
  tests: false

linters:
  disable:
    - staticcheck
  enable:
    - revive
    - misspell
    - errcheck
    - dogsled
    - unconvert
    - nakedret
    - copyloopvar
    - gosec

  exclusions:
    generated: lax
    presets:
      - comments
      - common-false-positives
      - legacy
      - std-error-handling
    rules:
      - path: (.+)\.go$
        text: Error return value of `.*Close` is not checked
      - path: (.+)\.go$
        text: Error return value of `.*Flush` is not checked
